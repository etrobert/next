{"version":3,"sources":["atoms.ts","firestore.ts","useAddTask.ts","useDeleteTask.ts","useUpdateTask.ts","ListView/Task.tsx","ListView/ListView.tsx","NextPanel/NextPanel.tsx","useRecoilProjectState.ts","useSyncFirestore.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["taskStateById","atomFamily","key","default","name","status","projectIdState","atom","projectState","tasks","nextTaskIdState","selector","get","filter","taskId","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","getFirestore","useAddTask","useRecoilValue","useCallback","ref","collection","task","addDoc","useDeleteTask","id","deleteDoc","doc","useUpdateTask","update","updateDoc","Task","deleteTask","updateTask","type","checked","onChange","className","onClick","ListView","useState","newTaskName","setNewTaskName","addTask","onSubmit","e","preventDefault","map","form","value","target","NextPanel","nextTaskId","useRecoilState","nextTask","setNextTask","useRecoilProjectState","useRecoilCallback","set","project","removeTask","without","setTask","useSyncFirestore","useEffect","onSnapshot","snapshot","docChanges","forEach","change","data","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","mockTasks","n","Math","random","mockTasksIds","ReactDOM","render","StrictMode","initializeState","document","getElementById"],"mappings":"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","file":"static/js/main.949acebe.chunk.js","sourcesContent":["import { atom, atomFamily, selector } from 'recoil';\n\nimport { Project, ProjectId, Task, TaskId } from './types';\n\nconst taskStateById = atomFamily<Task, TaskId>({\n  key: 'Task',\n  default: {\n    name: 'DEFAULT-NAME',\n    status: 'ready',\n  },\n});\n\nconst projectIdState = atom<ProjectId>({\n  key: 'ProjectId',\n  default: 'AY61ltFwdgzx8AgBFqKC',\n});\n\nconst projectState = atom<Project>({\n  key: 'Project',\n  default: { tasks: [] },\n});\n\nconst nextTaskIdState = selector<TaskId | null>({\n  key: 'NextTaskId',\n  get: ({ get }) => {\n    const { tasks } = get(projectState);\n    return (\n      tasks.filter(\n        (taskId) => get(taskStateById(taskId)).status !== 'completed'\n      )[0] ?? null\n    );\n  },\n});\n\nexport { taskStateById, projectIdState, projectState, nextTaskIdState };\n","import { initializeApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: 'AIzaSyAvvj4nuUOxBJ6d0iE1Gjgg8gCXO7aXo_g',\n  authDomain: 'next-etienne.firebaseapp.com',\n  projectId: 'next-etienne',\n  storageBucket: 'next-etienne.appspot.com',\n  messagingSenderId: '489100545863',\n  appId: '1:489100545863:web:dafb3e6b2bb270198e4662',\n};\n\nconst app = initializeApp(firebaseConfig);\n\nconst firestore = getFirestore(app);\n\nexport default firestore;\n","import { addDoc, collection } from 'firebase/firestore';\nimport { useCallback } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport firestore from 'firestore';\n\nimport { projectIdState } from './atoms';\n\nconst useAddTask = () => {\n  const projectId = useRecoilValue(projectIdState);\n\n  return useCallback(\n    (name: string) => {\n      const ref = collection(firestore, `projects/${projectId}/tasks`);\n      const task = {\n        name,\n        status: 'ready',\n      };\n      return addDoc(ref, task);\n    },\n    [projectId]\n  );\n};\n\nexport default useAddTask;\n","import { useRecoilValue } from 'recoil';\n\nimport { projectIdState } from './atoms';\nimport { TaskId } from './types';\nimport { useCallback } from 'react';\nimport { deleteDoc, doc } from 'firebase/firestore';\nimport firestore from 'firestore';\n\nconst useDeleteTask = () => {\n  const projectId = useRecoilValue(projectIdState);\n\n  return useCallback(\n    (id: TaskId) =>\n      deleteDoc(doc(firestore, `projects/${projectId}/tasks/${id}`)),\n    [projectId]\n  );\n};\n\nexport default useDeleteTask;\n","import { doc, updateDoc } from 'firebase/firestore';\nimport { useCallback } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport firestore from 'firestore';\n\nimport { projectIdState } from './atoms';\nimport { Task, TaskId } from './types';\n\nconst useUpdateTask = () => {\n  const projectId = useRecoilValue(projectIdState);\n\n  return useCallback(\n    (id: TaskId, update: Partial<Task>) =>\n      updateDoc(doc(firestore, `projects/${projectId}/tasks/${id}`), update),\n    [projectId]\n  );\n};\n\nexport default useUpdateTask;\n","import { useRecoilValue } from 'recoil';\n\nimport { taskStateById } from 'atoms';\nimport { TaskId } from 'types';\nimport useDeleteTask from 'useDeleteTask';\nimport useUpdateTask from 'useUpdateTask';\n\nimport './Task.css';\n\ntype Props = {\n  id: TaskId;\n};\n\nconst Task = ({ id }: Props) => {\n  const { name, status } = useRecoilValue(taskStateById(id));\n\n  const deleteTask = useDeleteTask();\n  const updateTask = useUpdateTask();\n\n  // TODO Use updater rather than local value\n  const toggleStatus = () =>\n    updateTask(id, { status: status === 'ready' ? 'completed' : 'ready' });\n\n  return (\n    <tr>\n      <td>\n        <input\n          type=\"checkbox\"\n          checked={status === 'completed'}\n          onChange={toggleStatus}\n        />\n      </td>\n      <td className={'Task__name-td'}>{name}</td>\n      <td>\n        <button onClick={() => deleteTask(id)}>Delete</button>\n      </td>\n    </tr>\n  );\n};\n\nexport default Task;\n","import { useState } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { projectState } from 'atoms';\nimport useAddTask from 'useAddTask';\n\nimport Task from './Task';\n\nimport './ListView.css';\n\nconst ListView = () => {\n  const { tasks } = useRecoilValue(projectState);\n  const [newTaskName, setNewTaskName] = useState<string>('');\n\n  const addTask = useAddTask();\n\n  return (\n    <>\n      <form\n        id=\"new-task-form\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          if (newTaskName === '') return;\n          addTask(newTaskName);\n          setNewTaskName('');\n        }}\n      />\n      <table className=\"ListView\">\n        <tbody>\n          {tasks.map((task) => (\n            <Task key={task} id={task} />\n          ))}\n          <tr>\n            <td>\n              <button\n                className=\"ListView__new-task-submit\"\n                type=\"submit\"\n                form=\"new-task-form\"\n              />\n            </td>\n            <td>\n              <input\n                className=\"ListView__new-task-input\"\n                type=\"text\"\n                form=\"new-task-form\"\n                value={newTaskName}\n                onChange={(e) => setNewTaskName(e.target.value)}\n              />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nexport default ListView;\n","import { useRecoilState, useRecoilValue } from 'recoil';\n\nimport { nextTaskIdState, taskStateById } from 'atoms';\n\nimport './NextPanel.css';\n\nconst NextPanel = () => {\n  const nextTaskId = useRecoilValue(nextTaskIdState);\n  const [nextTask, setNextTask] = useRecoilState(\n    taskStateById(nextTaskId ?? '')\n  );\n\n  return (\n    <div className=\"NextPanel\">\n      {nextTaskId === null ? (\n        <h2 className=\"NextPanel__done\">You're done!</h2>\n      ) : (\n        <>\n          <h2>Next Task</h2>\n          {nextTask.name}\n          <button\n            onClick={() =>\n              setNextTask((task) => ({ ...task, status: 'completed' }))\n            }\n          >\n            DONE!\n          </button>\n        </>\n      )}\n    </div>\n  );\n};\nexport default NextPanel;\n","import { without } from 'lodash';\nimport { useRecoilCallback } from 'recoil';\n\nimport { projectState, taskStateById } from './atoms';\nimport { Task, TaskId } from './types';\n\nconst useRecoilProjectState = () => {\n  const addTask = useRecoilCallback(({ set }) => (id: TaskId, task: Task) => {\n    set(taskStateById(id), task);\n    set(projectState, (project) => ({\n      ...project,\n      tasks: [...project.tasks, id],\n    }));\n  });\n\n  const removeTask = useRecoilCallback(\n    ({ set }) =>\n      (id: TaskId) =>\n        set(projectState, (project) => ({\n          ...project,\n          tasks: without(project.tasks, id),\n        }))\n  );\n\n  const setTask = useRecoilCallback(\n    ({ set }) =>\n      (id: TaskId, task: Task) =>\n        set(taskStateById(id), task)\n  );\n\n  return { addTask, setTask, removeTask };\n};\n\nexport default useRecoilProjectState;\n","import { useEffect } from 'react';\nimport { collection, onSnapshot } from 'firebase/firestore';\nimport { useRecoilValue } from 'recoil';\n\nimport useRecoilProjectState from './useRecoilProjectState';\nimport { projectIdState } from './atoms';\nimport firestore from './firestore';\nimport { Task } from './types';\n\nconst useSyncFirestore = (): void => {\n  const projectId = useRecoilValue(projectIdState);\n  const { addTask, setTask, removeTask } = useRecoilProjectState();\n\n  useEffect(() => {\n    const ref = collection(firestore, `projects/${projectId}/tasks`);\n    const unsubscribe = onSnapshot(ref, (snapshot) =>\n      snapshot.docChanges().forEach((change) => {\n        const { id } = change.doc;\n        const task = change.doc.data() as Task;\n        switch (change.type) {\n          case 'added':\n            addTask(id, task);\n            break;\n          case 'modified':\n            setTask(id, task);\n            break;\n          case 'removed':\n            removeTask(id);\n            break;\n        }\n      })\n    );\n    return unsubscribe;\n  }, [projectId, addTask, removeTask, setTask]);\n};\n\nexport default useSyncFirestore;\n","import ListView from './ListView/ListView';\nimport NextPanel from './NextPanel/NextPanel';\nimport useSyncFirestore from './useSyncFirestore';\n\nimport './App.css';\n\nfunction App() {\n  useSyncFirestore();\n\n  return (\n    <div className=\"App\">\n      <h1>Next</h1>\n      <ListView />\n      <NextPanel />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RecoilRoot } from 'recoil';\n\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { projectState, taskStateById } from './atoms';\n\nimport './index.css';\n\nconst mockTaskFactory = (n: number) => ({\n  name: `task-${n}`,\n  status: Math.random() > 0.5 ? ('ready' as const) : ('completed' as const),\n});\n\nconst mockTasks = [0, 1, 2, 3, 4, 5, 6].map(mockTaskFactory);\nconst mockTasksIds = mockTasks.map((task) => task.name);\n\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot\n      initializeState={({ set }) => {\n        set(projectState, { tasks: mockTasksIds });\n        mockTasks.forEach((task) => set(taskStateById(task.name), task));\n      }}\n    >\n      <App />\n    </RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}