{"version":3,"sources":["firestore.ts","useAddProject.ts","LandingPage/LandingPage.tsx","atoms.ts","useRecoilProjectState.ts","useSyncFirestore.ts","useClearProjectOnNewId.ts","useAddTask.ts","useDeleteTask.ts","useUpdateTask.ts","ListView/Task.tsx","ListView/ListView.tsx","NextPanel/NextPanel.tsx","MainPage/MainPage.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","getFirestore","useAddProjet","useCallback","addDoc","collection","LandingPage","addProject","useAddProject","useState","creatingProject","setCreatingProject","onCtaClick","a","ref","window","location","href","id","className","onClick","undefined","taskStateById","atomFamily","key","default","name","status","projectIdState","atom","projectState","tasks","nextTaskIdState","selector","get","filter","taskId","useRecoilProjectState","addTask","useRecoilCallback","set","task","project","removeTask","without","setTask","useSyncFirestore","useRecoilValue","useEffect","onSnapshot","snapshot","docChanges","forEach","change","doc","data","type","useClearProjectOnNewId","setProject","useSetRecoilState","useAddTask","useDeleteTask","deleteDoc","useUpdateTask","update","updateDoc","Task","deleteTask","updateTask","checked","onChange","ListView","newTaskName","setNewTaskName","onSubmit","e","preventDefault","map","form","value","target","NextPanel","nextTaskId","useRecoilState","nextTask","setNextTask","MainPage","useParams","setProjectId","App","basename","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d9e9aefe.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: 'AIzaSyAvvj4nuUOxBJ6d0iE1Gjgg8gCXO7aXo_g',\n  authDomain: 'next-etienne.firebaseapp.com',\n  projectId: 'next-etienne',\n  storageBucket: 'next-etienne.appspot.com',\n  messagingSenderId: '489100545863',\n  appId: '1:489100545863:web:dafb3e6b2bb270198e4662',\n};\n\nconst app = initializeApp(firebaseConfig);\n\nconst firestore = getFirestore(app);\n\nexport default firestore;\n","import { useCallback } from 'react';\nimport { addDoc, collection } from 'firebase/firestore';\nimport firestore from 'firestore';\n\nconst useAddProjet = () =>\n  useCallback(() => addDoc(collection(firestore, 'projects'), {}), []);\n\nexport default useAddProjet;\n","import { useState } from 'react';\nimport useAddProject from 'useAddProject';\n\nimport './LandingPage.css';\n\nconst LandingPage = () => {\n  const addProject = useAddProject();\n\n  const [creatingProject, setCreatingProject] = useState(false);\n\n  const onCtaClick = async () => {\n    setCreatingProject(true);\n    const ref = await addProject();\n    window.location.href = `/next/project/${ref.id}`;\n  };\n\n  return (\n    <div className=\"LandingPage\">\n      <h1 className=\"LandingPage__title\">Next</h1>\n      <button\n        className={'LandingPage__cta'}\n        onClick={creatingProject ? undefined : onCtaClick}\n      >\n        {creatingProject ? 'Creating Project...' : 'START NOW'}\n      </button>\n    </div>\n  );\n};\nexport default LandingPage;\n","import { atom, atomFamily, selector } from 'recoil';\n\nimport { Project, ProjectId, Task, TaskId } from './types';\n\nconst taskStateById = atomFamily<Task, TaskId>({\n  key: 'Task',\n  default: {\n    name: 'DEFAULT-NAME',\n    status: 'ready',\n  },\n});\n\nconst projectIdState = atom<ProjectId>({\n  key: 'ProjectId',\n  default: 'AY61ltFwdgzx8AgBFqKC',\n});\n\nconst projectState = atom<Project>({\n  key: 'Project',\n  default: { tasks: [] },\n});\n\nconst nextTaskIdState = selector<TaskId | null>({\n  key: 'NextTaskId',\n  get: ({ get }) => {\n    const { tasks } = get(projectState);\n    return (\n      tasks.filter(\n        (taskId) => get(taskStateById(taskId)).status !== 'completed'\n      )[0] ?? null\n    );\n  },\n});\n\nexport { taskStateById, projectIdState, projectState, nextTaskIdState };\n","import { without } from 'lodash';\nimport { useRecoilCallback } from 'recoil';\n\nimport { projectState, taskStateById } from './atoms';\nimport { Task, TaskId } from './types';\n\nconst useRecoilProjectState = () => {\n  const addTask = useRecoilCallback(({ set }) => (id: TaskId, task: Task) => {\n    set(taskStateById(id), task);\n    set(projectState, (project) => ({\n      ...project,\n      tasks: [...project.tasks, id],\n    }));\n  });\n\n  const removeTask = useRecoilCallback(\n    ({ set }) =>\n      (id: TaskId) =>\n        set(projectState, (project) => ({\n          ...project,\n          tasks: without(project.tasks, id),\n        }))\n  );\n\n  const setTask = useRecoilCallback(\n    ({ set }) =>\n      (id: TaskId, task: Task) =>\n        set(taskStateById(id), task)\n  );\n\n  return { addTask, setTask, removeTask };\n};\n\nexport default useRecoilProjectState;\n","import { useEffect } from 'react';\nimport { collection, onSnapshot } from 'firebase/firestore';\nimport { useRecoilValue } from 'recoil';\n\nimport useRecoilProjectState from './useRecoilProjectState';\nimport { projectIdState } from './atoms';\nimport firestore from './firestore';\nimport { Task } from './types';\n\nconst useSyncFirestore = (): void => {\n  const projectId = useRecoilValue(projectIdState);\n  const { addTask, setTask, removeTask } = useRecoilProjectState();\n\n  useEffect(() => {\n    const ref = collection(firestore, `projects/${projectId}/tasks`);\n    const unsubscribe = onSnapshot(ref, (snapshot) =>\n      snapshot.docChanges().forEach((change) => {\n        const { id } = change.doc;\n        const task = change.doc.data() as Task;\n        switch (change.type) {\n          case 'added':\n            addTask(id, task);\n            break;\n          case 'modified':\n            setTask(id, task);\n            break;\n          case 'removed':\n            removeTask(id);\n            break;\n        }\n      })\n    );\n    return unsubscribe;\n  }, [projectId, addTask, removeTask, setTask]);\n};\n\nexport default useSyncFirestore;\n","import { useEffect } from 'react';\nimport { useSetRecoilState } from 'recoil';\n\nimport { projectState } from './atoms';\n\nconst useClearProjectOnNewId = () => {\n  const setProject = useSetRecoilState(projectState);\n  useEffect(() => setProject({ tasks: [] }));\n};\n\nexport default useClearProjectOnNewId;\n","import { addDoc, collection } from 'firebase/firestore';\nimport { useCallback } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport firestore from 'firestore';\n\nimport { projectIdState } from './atoms';\n\nconst useAddTask = () => {\n  const projectId = useRecoilValue(projectIdState);\n\n  return useCallback(\n    (name: string) => {\n      const ref = collection(firestore, `projects/${projectId}/tasks`);\n      const task = {\n        name,\n        status: 'ready',\n      };\n      return addDoc(ref, task);\n    },\n    [projectId]\n  );\n};\n\nexport default useAddTask;\n","import { useRecoilValue } from 'recoil';\n\nimport { projectIdState } from './atoms';\nimport { TaskId } from './types';\nimport { useCallback } from 'react';\nimport { deleteDoc, doc } from 'firebase/firestore';\nimport firestore from 'firestore';\n\nconst useDeleteTask = () => {\n  const projectId = useRecoilValue(projectIdState);\n\n  return useCallback(\n    (id: TaskId) =>\n      deleteDoc(doc(firestore, `projects/${projectId}/tasks/${id}`)),\n    [projectId]\n  );\n};\n\nexport default useDeleteTask;\n","import { doc, updateDoc } from 'firebase/firestore';\nimport { useCallback } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport firestore from 'firestore';\n\nimport { projectIdState } from './atoms';\nimport { Task, TaskId } from './types';\n\nconst useUpdateTask = () => {\n  const projectId = useRecoilValue(projectIdState);\n\n  return useCallback(\n    (id: TaskId, update: Partial<Task>) =>\n      updateDoc(doc(firestore, `projects/${projectId}/tasks/${id}`), update),\n    [projectId]\n  );\n};\n\nexport default useUpdateTask;\n","import { useRecoilValue } from 'recoil';\n\nimport { taskStateById } from 'atoms';\nimport { TaskId } from 'types';\nimport useDeleteTask from 'useDeleteTask';\nimport useUpdateTask from 'useUpdateTask';\n\nimport './Task.css';\n\ntype Props = {\n  id: TaskId;\n};\n\nconst Task = ({ id }: Props) => {\n  const { name, status } = useRecoilValue(taskStateById(id));\n\n  const deleteTask = useDeleteTask();\n  const updateTask = useUpdateTask();\n\n  // TODO Use updater rather than local value\n  const toggleStatus = () =>\n    updateTask(id, { status: status === 'ready' ? 'completed' : 'ready' });\n\n  return (\n    <tr>\n      <td>\n        <input\n          type=\"checkbox\"\n          checked={status === 'completed'}\n          onChange={toggleStatus}\n        />\n      </td>\n      <td className={'Task__name-td'}>{name}</td>\n      <td>\n        <button onClick={() => deleteTask(id)}>Delete</button>\n      </td>\n    </tr>\n  );\n};\n\nexport default Task;\n","import { useState } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { projectState } from 'atoms';\nimport useAddTask from 'useAddTask';\n\nimport Task from './Task';\n\nimport './ListView.css';\n\nconst ListView = () => {\n  const { tasks } = useRecoilValue(projectState);\n  const [newTaskName, setNewTaskName] = useState<string>('');\n\n  const addTask = useAddTask();\n\n  return (\n    <>\n      <form\n        id=\"new-task-form\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          if (newTaskName === '') return;\n          addTask(newTaskName);\n          setNewTaskName('');\n        }}\n      />\n      <table className=\"ListView\">\n        <tbody>\n          {tasks.map((task) => (\n            <Task key={task} id={task} />\n          ))}\n          <tr>\n            <td>\n              <button\n                className=\"ListView__new-task-submit\"\n                type=\"submit\"\n                form=\"new-task-form\"\n              />\n            </td>\n            <td>\n              <input\n                className=\"ListView__new-task-input\"\n                type=\"text\"\n                form=\"new-task-form\"\n                value={newTaskName}\n                onChange={(e) => setNewTaskName(e.target.value)}\n              />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nexport default ListView;\n","import { useRecoilState, useRecoilValue } from 'recoil';\n\nimport { nextTaskIdState, taskStateById } from 'atoms';\n\nimport './NextPanel.css';\n\nconst NextPanel = () => {\n  const nextTaskId = useRecoilValue(nextTaskIdState);\n  const [nextTask, setNextTask] = useRecoilState(\n    taskStateById(nextTaskId ?? '')\n  );\n\n  return (\n    <div className=\"NextPanel\">\n      {nextTaskId === null ? (\n        <h2 className=\"NextPanel__done\">You're done!</h2>\n      ) : (\n        <>\n          <h2>Next Task</h2>\n          {nextTask.name}\n          <button\n            onClick={() =>\n              setNextTask((task) => ({ ...task, status: 'completed' }))\n            }\n          >\n            DONE!\n          </button>\n        </>\n      )}\n    </div>\n  );\n};\nexport default NextPanel;\n","import { useEffect } from 'react';\nimport { useParams } from 'react-router';\nimport { useSetRecoilState } from 'recoil';\n\nimport { projectIdState } from 'atoms';\nimport useSyncFirestore from 'useSyncFirestore';\nimport useClearProjectOnNewId from 'useClearProjectOnNewId';\n\nimport ListView from '../ListView/ListView';\nimport NextPanel from '../NextPanel/NextPanel';\n\nimport './MainPage.css';\n\nconst MainPage = () => {\n  const { projectId } = useParams<{ projectId: string }>();\n\n  const setProjectId = useSetRecoilState(projectIdState);\n\n  useEffect(() => setProjectId(projectId), [projectId, setProjectId]);\n\n  useSyncFirestore();\n  useClearProjectOnNewId();\n\n  return (\n    <div className=\"MainPage\">\n      <h1 className=\"MainPage__title\">Next</h1>\n      <ListView />\n      <NextPanel />\n    </div>\n  );\n};\nexport default MainPage;\n","import { Switch, BrowserRouter as Router, Route } from 'react-router-dom';\n\nimport LandingPage from './LandingPage/LandingPage';\nimport MainPage from './MainPage/MainPage';\n\nimport './App.css';\n\nfunction App() {\n  return (\n    <Router basename=\"/next\">\n      <Switch>\n        <Route exact path=\"/\">\n          <LandingPage />\n        </Route>\n        <Route path=\"/project/:projectId\">\n          <MainPage />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RecoilRoot } from 'recoil';\n\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot>\n      <App />\n    </RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}